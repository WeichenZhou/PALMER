# Notes
## palmer

```bash
export PALMER_Path=.
export OutPutDir=./0000
export DataDir=$PALMER_Path/testdata
mkdir $OutPutDir

./PALMER --input $DataDir/sample.bam --workdir $OutPutDir/ --ref_ver GRCh38 --output sample --type LINE --chr chr19 --ref_fa $DataDir/GRCh38.fa

./PALMER --input $DataDir/sample.bam --workdir $OutPutDir/ --ref_ver GRCh38 --output sample --type LINE --chr chr19 --ref_fa $DataDir/GRCh38.fa > $OutPutDir/running.log 2>&1

./PALMER --input $DataDir/output.sorted.bam --workdir $OutPutDir/ --ref_ver GRCh38 --output sample --type LINE --chr chrX --ref_fa $DataDir/GRCh38_BSM.fa > 0000.log 2>&1

# CURRENT
./PALMER --input $DataDir/output.sorted.bam --workdir $OutPutDir/ --ref_ver GRCh38 --ref_fa $DataDir/GRCh38_BSM.fa --output sample --type CUSTOMIZED --chr chrX --custom_seq $DataDir/MT.fa --custom_index $DataDir/refNumts.38.bed > $OutPutDir/running.log 2>&1
valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all --show-reachable=yes ./PALMER --input $DataDir/output.sorted.bam --workdir $OutPutDir/ --ref_ver GRCh38 --ref_fa $DataDir/GRCh38_BSM.fa --output sample --type CUSTOMIZED --chr chrX --custom_seq $DataDir/MT.fa --custom_index $DataDir/refNumts.38.bed > $OutPutDir/valgrind.log 2>&1

./PALMER --input merged.sorted.NA19434.chrX.0131.bam --workdir Youe_dir --output output --ref_ver GRCh38 --ref_fa The_ref  --type CUSTOMIZED --chr chrX --custom_seq Seq_that_will_be_sent_to_you --custom_index Index_that_will_be_sent_to_you

valgrind --tool=memcheck --leak-check=full --show-leak-kinds=all --show-reachable=yes ./PALMER --input $DataDir/sample.bam --workdir $OutPutDir/ --ref_ver GRCh38 --output sample --type LINE --chr chr19 --ref_fa $DataDir/GRCh38.fa > $OutPutDir/valgrind.log 2>&1
```
## samtools

```bash
sudo apt-get update  # Ensure the package list is up to date
sudo apt-get install autoconf automake make gcc perl zlib1g-dev libbz2-dev liblzma-dev libcurl4-gnutls-dev libssl-dev libncurses5-dev

# clone htslib
git clone https://github.com/samtools/htslib.git
cd htslib      &&\
autoheader     &&\
autoconf       &&\
./configure    &&\
make           &&\
make install   &&\
cd ..

# clone samtools
git clone https://github.com/samtools/samtools.git
cd samtools    &&\
autoheader     &&\
autoconf       &&\
./configure    &&\
make           &&\
make install   &&\
cd ..
```

### commands

```bash
# samtools view 
#       â€“ views and converts SAM/BAM/CRAM files
# -q INT    Skip alignments with MAPQ smaller than INT [0].
# -F INT    Do not output alignments with any bits set in INT present in the FLAG field. INT can be specified in hex by beginning with `0x' (i.e. /^0x[0-9A-F]+/) or in octal by beginning with `0' (i.e. /^0[0-7]+/) [0].

# samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 xxx.bam chr:1-666

sys="samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 "+input_bam+" "+chr+":"+start+"-"+end+" |sed -e 's/[ ][ ]*/_/g'  > "+working_dir+"region.sam";
# samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 ./example/sample.bam chr19:4000001-5000000 |sed -e 's/[ ][ ]*/_/g'  > ./workdir/chr19_4000001_5000000.region.sam
# samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 ./example/sample.bam chr19:4000001-5000000
# samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 /home/halo/Desktop/dev/palmer.origin/example/sample.bam chr19:4000001-5000000 -o out.txt

# samtools
samtools view -q 10 -F 0x100 -F 0x200 -F 0x800 -F 0x400 ./example/sample.bam chr19:1000001-2000000

sed -e 's/[ ][ ]*/_/g'

samtools faidx ./testdata/GRCh38.fa chr19:4890620-4891320
sys_ref_junc="samtools faidx "+fasta+" "+chr+":"+s_start_junc+"-"+s_end_junc+" > "+ref_junc_file;
```
### sam view

```
ga = {
    in: default,
    out: default,
    reference: 0x0,
    nthreads: 0,
    write_index: 0,
}

```


```bash
bash -c "blastn -task blastn -query <(echo -e \">.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\\nCAAAGTTGGTCGCAGTAGTGTTCCCTCAACAGGCGCACAAGGGAGAGAACA\") -subject <(echo -e \">.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\\nATTCACACAGCTTGTACAAATAATCGACCCACTGACCAAAAAAAAAAAAAAAAAAGAAGTTTTCTATTCTTATGGCTCCAGCTTCCAATCGTGTCATGCAAAGCTTTCGTAACTCTCACATTTTCTGTTGTGGCTTGCTGCAACTTGCTCATTCTGACTGATTCCAGTTTGCCTACGGCAGATATGTCCTTTGCATCTTCACAAACTTTACTAAAAAATAAACTCATTTTTTTCTCCACATTAAAAAAATATCAATACAAACAAACAGTGATCCTTCGGGGACTCCCTGTGGGTCACAATGTCCTGACAGAGCAAGGGCCCTACTTGAAAGAAAAACTGCTCAAGAAGACTCCAGTGTTTCCCAATTCTCTTGACAAATTCAAACAATCCTGCAAAGGAAAGGCAAATGGTAGAAAAAGAAACCTCTCAGGTGGAATAGTTTTTCTGGAGAATCTATTAGTTTTGTAGAAGAAAAACGATGCCAATGTGAAATAAAAACCATTAGTTGAAACCAGAAACATTAAATGCAGTGTGTTTTGTGGGGACGTGCTGCCTATGAACATTACTGTAAAATTTTCAGGAAAACCATTCAATTATCCTGACAGCTATTTAGACCTTGACCATCTTTTAGTTTTTAATCATATATTGTGTAGATTTATTTATTATGAACTAAAACTCCTTTTTGACGGGCTCACTTCGAAAACACAAACAAAAAAAAAAGAAAATCAAACTCTATATCGCTTATAACTTTTCCAATTATCTCATTTTTATATTTTTGTATTTAAGACCAGCTTACCCGTTTGTTATATTTTCTGGGTTAAAGGTATTCATTGGTTTGTTCTGAATTTCCAAAACTTTATTTAAAAACGCATTTTTTAATGTAAAAAAAAAAAAATAAAAAAAAAAGAAGTGAGTTTACGCTCTGGGGCAAAAAATTTTAAAAAGGTCTTTCACTCTCAGAGTCCCTTTAAGTGCTGATTTGCCTCTATGAAGAGGAGAAATTGAAGTTGACTGGTGGATTATCCCTGGGAAATAAAAGAAACCCCGTTTCCTTCTGTGCAGTTTTTCCTGGTTTGGTTTTGTTAATTTAGCCCCATCCATGTTCTCCAATTCTGTAGGAATCAGGGTTGACATGCTTTTTGAGTCACAGCATGGCCACTAGGTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGAGAACAGAGTCTCATGCTGTTCACCATGCTTGGAGTGCAGTAGCATGATCTCGCTCAACCTCGCAACCTCTCCCTCCTGGTTCAATGGATTCTCCTGCTCAGCCTCCTGATAGCTGGGATTACAGGGTGCGTGTCCCACCAACCCGGCCCAGACTAATTTTTGTATTTTTAGTACGAGAGGGGGTTTCCACCATAATTGGGCCAGGCTGGTCTCAAAACCCTGAACCTCATGATCCACCCGCCTCGGCTTTCCCAAAAGTTGCTGGGGATTATAGGCGTGAGCCACCTACCTTCCCTGGCTGCTCCACTCTAGTTCTAAATATCAAAATTAGTTAATTCGATATCTGACTACCAGGTATCTTCTCCTTATCCTTAGCATTTTTCTTGCTAGATAGCATAAATATATACTTAAAAGGACTCAATCCTTCCATTTTAGCCCTGAAAAAATACAGACCAAAATTGTCGCTAAATTACGGCTTGATAACACTTCTCAAAGAGATCACAATCAAGCTCTGACATTAGATGTTGTAATCTTTACGATATTTATGTTTTTTTTTTCTTTTTGATGTCTAGGAGACATGTTTTCTGGTGGGGTCTCCACACAATATTGGCTCAACCTTACAAAAGGTGGCATCACCGTGTGGTACTGAGATGGTGGCGGCATCAAGTGTTCTGGGTTCTATAGGGGCTGGCCTTTCAAAAATTTAAAAAATTAACATAATAGTTTATAATTGGTGCCGTTAGTATATTATATTGGTTCTCTGGTGGTGGGTGGGTTGGTCAGGCCAGGAGGCATGCGCCTTTCTCACTCCACTAGACTTTTGCATTTCCCTAAATGCGCAGGGAGTAAGGCCCGTAGTGAACGTCCATGTTCATCGCTCGCTTCCTAATGCAGCTGATGAAACATTTGTCATGCCAAAGTACGTAACGAAGTATGCGCTTTCCCACTTAACCAAGCATGCGGTATTGGGCTGGCCTCTGGATGGCTAAAACATAAAATATATCCATTTGAGTGGATAAATTTGCTCTCGCCGTCTTTGGAGAAGTGTTCTACTTTCTGGCACTCTGTTTAGGTTCATGGGTTCCTCTTATTCTGCCGTAGCGGGGAACTTCGCGGATTGGTTATAATAAATTCTCTCTTTCCTGCGAGATCGTTGGGCTGGAGGCTCTTTTGGGGTTATCGTTTAACTCATGCATTTTTATCAAGAACTTTGAGTATTTGCATACTCAAATCGTACCTGAGAGTTGCTTCCTAAAACTCTCATGTACTTTTCATCTGGATATAGTCGAGTGCTTACCTCCGGTCATACCATCAATTATTTTTGTTTATCGCTAAGAAATACTCGCTTCACATTTCCTTCAGCTTTATATTGCAGAATTACACCTGCAGGAAGCCCCTGTGGCATCAATCTTACGTTGGCTGGGCGTTTCTGAGCATCAGGTCCTTTCATTTTATTTAAATTTGTTGAAAAAGAAGGAGGGAAAGTAATCATCCTGCCGCTGACTCTTCATCCCTTTCTACTTACTCGCGTTTTTCTAGAACACCTGCCTACCAGACTGATTGTTAGCCCCCCCGCGCCAGCTCCTAAAAGCCTGGCAATAGTTCCCGCCCCTTCTTGGACAGGTCTTTTCTTAATTTTTTTTATTTACCTGCCGCTCGTTCCTCTGTCTAACATGTCAGTAAAACTATTAGATGTAAAATACTTGGTTTGGCTAACTTCATGGTGTCAGTTCTTGGTCTCCGGTAAGAGCGTGATAGATCTAAAGATCTCGCTCTGTGTTATAGAAGTAATTCGTAAATT\") -word_size 6 -evalue 50 -dust no -outfmt \"7 std\" |grep -v \"#\" | awk '{if(\$3>=80&&\$4>=6&&(\$10-\$9)>0) print \"SRR3658445.41980_length=24089_4890970_1652.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\",0+\$7,0+\$8,\$9,\$10,51,\"3001\"}' >> ./0000/chr19_4000001_5000000/TSD_blastn_pre.txt "

blastn -task blastn -query <(echo -e \">.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\\nCAAAGTTGGTCGCAGTAGTGTTCCCTCAACAGGCGCACAAGGGAGAGAACA\") -subject <(echo -e \">.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\\nATTCACACAGCTTGTACAAATAATCGACCCACTGACCAAAAAAAAAAAAAAAAAAGAAGTTTTCTATTCTTATGGCTCCAGCTTCCAATCGTGTCATGCAAAGCTTTCGTAACTCTCACATTTTCTGTTGTGGCTTGCTGCAACTTGCTCATTCTGACTGATTCCAGTTTGCCTACGGCAGATATGTCCTTTGCATCTTCACAAACTTTACTAAAAAATAAACTCATTTTTTTCTCCACATTAAAAAAATATCAATACAAACAAACAGTGATCCTTCGGGGACTCCCTGTGGGTCACAATGTCCTGACAGAGCAAGGGCCCTACTTGAAAGAAAAACTGCTCAAGAAGACTCCAGTGTTTCCCAATTCTCTTGACAAATTCAAACAATCCTGCAAAGGAAAGGCAAATGGTAGAAAAAGAAACCTCTCAGGTGGAATAGTTTTTCTGGAGAATCTATTAGTTTTGTAGAAGAAAAACGATGCCAATGTGAAATAAAAACCATTAGTTGAAACCAGAAACATTAAATGCAGTGTGTTTTGTGGGGACGTGCTGCCTATGAACATTACTGTAAAATTTTCAGGAAAACCATTCAATTATCCTGACAGCTATTTAGACCTTGACCATCTTTTAGTTTTTAATCATATATTGTGTAGATTTATTTATTATGAACTAAAACTCCTTTTTGACGGGCTCACTTCGAAAACACAAACAAAAAAAAAAGAAAATCAAACTCTATATCGCTTATAACTTTTCCAATTATCTCATTTTTATATTTTTGTATTTAAGACCAGCTTACCCGTTTGTTATATTTTCTGGGTTAAAGGTATTCATTGGTTTGTTCTGAATTTCCAAAACTTTATTTAAAAACGCATTTTTTAATGTAAAAAAAAAAAAATAAAAAAAAAAGAAGTGAGTTTACGCTCTGGGGCAAAAAATTTTAAAAAGGTCTTTCACTCTCAGAGTCCCTTTAAGTGCTGATTTGCCTCTATGAAGAGGAGAAATTGAAGTTGACTGGTGGATTATCCCTGGGAAATAAAAGAAACCCCGTTTCCTTCTGTGCAGTTTTTCCTGGTTTGGTTTTGTTAATTTAGCCCCATCCATGTTCTCCAATTCTGTAGGAATCAGGGTTGACATGCTTTTTGAGTCACAGCATGGCCACTAGGTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTGAGAACAGAGTCTCATGCTGTTCACCATGCTTGGAGTGCAGTAGCATGATCTCGCTCAACCTCGCAACCTCTCCCTCCTGGTTCAATGGATTCTCCTGCTCAGCCTCCTGATAGCTGGGATTACAGGGTGCGTGTCCCACCAACCCGGCCCAGACTAATTTTTGTATTTTTAGTACGAGAGGGGGTTTCCACCATAATTGGGCCAGGCTGGTCTCAAAACCCTGAACCTCATGATCCACCCGCCTCGGCTTTCCCAAAAGTTGCTGGGGATTATAGGCGTGAGCCACCTACCTTCCCTGGCTGCTCCACTCTAGTTCTAAATATCAAAATTAGTTAATTCGATATCTGACTACCAGGTATCTTCTCCTTATCCTTAGCATTTTTCTTGCTAGATAGCATAAATATATACTTAAAAGGACTCAATCCTTCCATTTTAGCCCTGAAAAAATACAGACCAAAATTGTCGCTAAATTACGGCTTGATAACACTTCTCAAAGAGATCACAATCAAGCTCTGACATTAGATGTTGTAATCTTTACGATATTTATGTTTTTTTTTTCTTTTTGATGTCTAGGAGACATGTTTTCTGGTGGGGTCTCCACACAATATTGGCTCAACCTTACAAAAGGTGGCATCACCGTGTGGTACTGAGATGGTGGCGGCATCAAGTGTTCTGGGTTCTATAGGGGCTGGCCTTTCAAAAATTTAAAAAATTAACATAATAGTTTATAATTGGTGCCGTTAGTATATTATATTGGTTCTCTGGTGGTGGGTGGGTTGGTCAGGCCAGGAGGCATGCGCCTTTCTCACTCCACTAGACTTTTGCATTTCCCTAAATGCGCAGGGAGTAAGGCCCGTAGTGAACGTCCATGTTCATCGCTCGCTTCCTAATGCAGCTGATGAAACATTTGTCATGCCAAAGTACGTAACGAAGTATGCGCTTTCCCACTTAACCAAGCATGCGGTATTGGGCTGGCCTCTGGATGGCTAAAACATAAAATATATCCATTTGAGTGGATAAATTTGCTCTCGCCGTCTTTGGAGAAGTGTTCTACTTTCTGGCACTCTGTTTAGGTTCATGGGTTCCTCTTATTCTGCCGTAGCGGGGAACTTCGCGGATTGGTTATAATAAATTCTCTCTTTCCTGCGAGATCGTTGGGCTGGAGGCTCTTTTGGGGTTATCGTTTAACTCATGCATTTTTATCAAGAACTTTGAGTATTTGCATACTCAAATCGTACCTGAGAGTTGCTTCCTAAAACTCTCATGTACTTTTCATCTGGATATAGTCGAGTGCTTACCTCCGGTCATACCATCAATTATTTTTGTTTATCGCTAAGAAATACTCGCTTCACATTTCCTTCAGCTTTATATTGCAGAATTACACCTGCAGGAAGCCCCTGTGGCATCAATCTTACGTTGGCTGGGCGTTTCTGAGCATCAGGTCCTTTCATTTTATTTAAATTTGTTGAAAAAGAAGGAGGGAAAGTAATCATCCTGCCGCTGACTCTTCATCCCTTTCTACTTACTCGCGTTTTTCTAGAACACCTGCCTACCAGACTGATTGTTAGCCCCCCCGCGCCAGCTCCTAAAAGCCTGGCAATAGTTCCCGCCCCTTCTTGGACAGGTCTTTTCTTAATTTTTTTTATTTACCTGCCGCTCGTTCCTCTGTCTAACATGTCAGTAAAACTATTAGATGTAAAATACTTGGTTTGGCTAACTTCATGGTGTCAGTTCTTGGTCTCCGGTAAGAGCGTGATAGATCTAAAGATCTCGCTCTGTGTTATAGAAGTAATTCGTAAATT\") -word_size 6 -evalue 50 -dust no -outfmt \"7 std\" |grep -v \"#\" | awk '{if(\$3>=80&&\$4>=6&&(\$10-\$9)>0) print \"SRR3658445.41980_length=24089_4890970_1652.4580.6036.14424.16235.4890970.4890970.chr19.+.0.0.0.0.0.0.0\",0+\$7,0+\$8,\$9,\$10,51,\"3001\"}' >> ./0000/chr19_4000001_5000000/TSD_blastn_pre.txt

```


git clone https://github.com.cnpmjs.org/WeichenZhou/PALMER.git wcz_palmer
git clone https://gitclone.com/github.com/WeichenZhou/PALMER.git wcz_palmer
